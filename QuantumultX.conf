// QuantumultX / Lann
// update timeï¼š2022-12-15
// Telegramï¼šhttps://t.me/LannKoo

[general]
# > ç”¨äºèŠ‚ç‚¹å»¶è¿Ÿæµ‹è¯•
server_check_url= http://1.1.1.1/generate_204
# > æœåŠ¡å™¨æµ‹è¯•è¶…æ—¶æ—¶é—´ (æ¯«ç§’)
server_check_timeout= 2000
# > ç”¨äºè®¾ç½®å›¾æ ‡æ˜¾ç¤º
geo_location_checker= http://ip-api.com/json/?lang=zh-CN, https://raw.githubusercontent.com/LannKss/QuantumultX/main/IP-API.js
# > ç¥æœºåŠŸèƒ½å¼ºå¤§çš„è§£æå™¨
resource_parser_url= https://fastly.jsdelivr.net/gh/KOP-XIAO/QuantumultX@master/Scripts/resource-parser.js
# > ä¸‹åˆ—è·¯å¾„ä¸ç»è¿‡QuantumultXå¤„ç†
excluded_routes= 192.168.0.0/16, 192.168.0.0/24, 172.16.0.0/12, 100.64.0.0/10, 10.0.0.0/8, 17.0.0.0/8
# > ä¸‹åˆ—è·¯å¾„ä¸ç»è¿‡DNSå¤„ç†
dns_exclusion_list=*.cmpassport.com, *.jegotrip.com.cn, *.icitymobile.mobi, id6.me, *.pingan.com.cn, *.cmbchina.com
# > ä»¥ä¸‹å…³é—­UDP å¦‚éœ€å¼€å¯æ³¨è§£å³å¯
udp_drop_list= 443

[dns]
no-system
circumvent-ipv4-answer=127.0.0.1,0.0.0.0
circumvent-ipv6-answer=::
server= 223.5.5.5
server= 119.29.29.29
server= 114.114.114.114
doh-server= https://223.5.5.5/dns-query,https://223.6.6.6/dns-query

[policy]
static=Control, proxy, é¦™æ¸¯èŠ‚ç‚¹, å°æ¹¾èŠ‚ç‚¹, æ—¥æœ¬èŠ‚ç‚¹, ç‹®åŸèŠ‚ç‚¹, ç¾å›½èŠ‚ç‚¹, direct, reject, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/Global.png
static=è‹¹æœæœåŠ¡, Control, proxy, direct, reject, é¦™æ¸¯èŠ‚ç‚¹, å°æ¹¾èŠ‚ç‚¹, æ—¥æœ¬èŠ‚ç‚¹, ç‹®åŸèŠ‚ç‚¹, ç¾å›½èŠ‚ç‚¹, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/Apple.png
static=å›½é™…åª’ä½“, Control, proxy, é¦™æ¸¯èŠ‚ç‚¹, å°æ¹¾èŠ‚ç‚¹, æ—¥æœ¬èŠ‚ç‚¹, ç‹®åŸèŠ‚ç‚¹, ç¾å›½èŠ‚ç‚¹, direct, reject, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/Streaming.png
static=æ¸¯å°ç•ªå‰§, Control, é¦™æ¸¯èŠ‚ç‚¹, å°æ¹¾èŠ‚ç‚¹, direct, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/StreamingSE.png
static=é»‘ç™½åå•, Control, direct, reject, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/Final.png
url-latency-benchmark=é¦™æ¸¯èŠ‚ç‚¹, server-tag-regex=(?=.*(æ¸¯|å¹¿æ¸¯|HK|(?i)Hong))^((?!(å°|æ—¥|éŸ©|æ–°|ç¾)).)*$, check-interval=600, tolerance=0, alive-checking=false, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/HK.png
url-latency-benchmark=å°æ¹¾èŠ‚ç‚¹, server-tag-regex=(?=.*(å°|å°æ¹¾|TW|(?i)Taiwan))^((?!(æ¸¯|æ—¥|éŸ©|æ–°|ç¾)).)*$, check-interval=600, tolerance=0, alive-checking=false, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/TW.png
url-latency-benchmark=æ—¥æœ¬èŠ‚ç‚¹, server-tag-regex=(?=.*(æ—¥|JP|(?i)Japan))^((?!(æ¸¯|å°|éŸ©|æ–°|ç¾)).)*$, check-interval=600, tolerance=0, alive-checking=false, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/JP.png
url-latency-benchmark=ç‹®åŸèŠ‚ç‚¹, server-tag-regex=(?=.*(æ–°|ç‹®|ç…|SG|(?i)Singapore))^((?!(æ¸¯|å°|æ—¥|éŸ©|ç¾)).)*$, check-interval=600, tolerance=0, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/SG.png
url-latency-benchmark=ç¾å›½èŠ‚ç‚¹, server-tag-regex=(?=.*(ç¾|ç¾å›½|US|(?i)States|American))^((?!(æ¸¯|å°|æ—¥|éŸ©|æ–°)).)*$, check-interval=600, tolerance=0, alive-checking=false, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/US.png

[server_remote]

[filter_remote]
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Direct/Direct.list, tag=è§„åˆ™ä¿®æ­£, force-policy=direct, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Advertising/Advertising.list, tag=å¹¿å‘Šæ‹¦æˆª, force-policy=reject, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/app2smile/rules/master/rule/tieba-ad-qx.list, tag=è´´å§å¹¿å‘Š, force-policy=reject, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Hijacking/Hijacking.list, tag=è¿è¥åŠ«æŒ, force-policy=reject, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Privacy/Privacy.list, tag=éšç§ä¿æŠ¤, force-policy=reject, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/Region/HK.list, tag=æµåª’ä½“HK, force-policy=é¦™æ¸¯èŠ‚ç‚¹, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/Region/TW.list, tag=æµåª’ä½“TW, force-policy=å°æ¹¾èŠ‚ç‚¹, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/Region/JP.list, tag=æµåª’ä½“JP, force-policy=æ—¥æœ¬èŠ‚ç‚¹, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/Region/US.list, tag=æµåª’ä½“US, force-policy=ç¾å›½èŠ‚ç‚¹, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/StreamingSE.list, tag=æ¸¯å°ç•ªå‰§, force-policy=æ¸¯å°ç•ªå‰§, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/Streaming.list, tag=å›½é™…åª’ä½“, force-policy=å›½é™…åª’ä½“, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Telegram/Telegram.list, tag=Telegram, force-policy=Control, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Speedtest/Speedtest.list, tag=Speedtest, force-policy=Control, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/lwd-temp/anti-ip-attribution/main/generated/quantumultx.list, tag=éšè—å½’å±åœ°, force-policy=Control, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Apple/Apple.list, tag=ğŸè‹¹æœæœåŠ¡, force-policy=è‹¹æœæœåŠ¡, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Global.list, tag=ğŸ‡ºğŸ‡³å›½å¤–ç½‘ç«™, force-policy=Control, update-interval=172800, opt-parser=true, enabled=true
https://github.com/NobyDa/Script/raw/master/Surge/WeChat.list, tag=ğŸ‡¨ğŸ‡³WeChat, force-policy=direct, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/China.list, tag=ğŸ‡¨ğŸ‡³å›½å†…ç½‘ç«™, force-policy=direct, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Quantumult/Filter/Extra/ChinaIP.list, tag=ğŸ‡¨ğŸ‡³å›½å†…IPæ± , force-policy=direct, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/VirgilClyne/GetSomeFries/main/ruleset/ASN.China.list, tag=ğŸ‡¨ğŸ‡³ASNè¿‡æ»¤, force-policy=direct, update-interval=172800, opt-parser=true, enabled=true

[rewrite_remote]
https://raw.githubusercontent.com/LannKss/QuantumultX/main/YouTubeAds.conf, tag=YouTubeAdsï¼Lann, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/ddgksf2013/Rewrite/master/AdBlock/StartUp.conf, tag=å¼€å±å»å¹¿å‘Šï¼å¢¨é±¼, update-interval=172800, opt-parser=false, enabled=true
https://github.com/ddgksf2013/Rewrite/raw/master/AdBlock/Weibo.conf, tag=å¾®åšå»å¹¿å‘Šï¼å¢¨é±¼, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/ddgksf2013/Rewrite/master/AdBlock/XiaoHongShu.conf, tag=å°çº¢ä¹¦å»å¹¿å‘Šï¼å¢¨é±¼, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/zhihu/zhihu_plus.qxrewrite, tag=çŸ¥ä¹å»å¹¿å‘Šï¼BM7, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/app2smile/rules/master/module/tieba-qx.conf, tag=è´´å§å»å¹¿å‘Šï¼app2smile, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/ddgksf2013/Rewrite/master/Function/BilibiliAutoRegion.conf, tag=Bilibiliæ¢åŒºï¼å¢¨é±¼, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/ddgksf2013/Rewrite/master/AdBlock/Bilibili.conf, tag=Bilibiliå»å¹¿å‘Šï¼å¢¨é±¼, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/Orz-3/QuantumultX/master/JD_TB_price.conf, tag=æ¯”ä»·è„šæœ¬ï¼Orz-3, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/Orz-3/QuantumultX/master/Netflix_ratings.conf, tag=Netflixè¯„åˆ†ï¼Orz-3, update-interval=172800, opt-parser=false, enabled=true
https://subweb.s3.fr-par.scw.cloud/Module/embyUnlocked.conf, tag=Embyï¼è§£é”, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/chavyleung/scripts/master/box/rewrite/boxjs.rewrite.quanx.conf, tag=BoxJs, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/Peng-YM/Sub-Store/master/config/QX.snippet, tag=Sub Store, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rewrite/QuantumultX/AdvertisingLite/AdvertisingLite.conf, tag=BM7å»å¹¿å‘Š, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Quantumult/Rewrite/General.conf, tag=ç¥æœºé‡å®šå‘, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/NobyDa/Script/master/QuantumultX/TestFlightDownload.conf, tag=TestFlightåŒºåŸŸé™åˆ¶è§£é™¤, update-interval=172800, opt-parser=false, enabled=true

[server_local]

[filter_local]
ip-cidr, 10.0.0.0/8, direct
ip-cidr, 127.0.0.0/8, direct
ip-cidr, 172.16.0.0/12, direct
ip-cidr, 192.168.0.0/16, direct
ip-cidr, 224.0.0.0/24, direct
ip-cidr, 182.254.116.0/24, direct
ip6-cidr, fe80::/10, direct
ip6-cidr, 2001:4860:4860::8888/32, direct
# > WeChat
ip-asn, 132203, direct
# > Weibo
host, sdkapp.uve.weibo.com, direct
# > bilibiliæ¢åŒº
ip-cidr, 203.107.1.1/24, reject
# > é˜»æ­¢æŸè¯ˆ
host-suffix, gjfzpt.cn, reject
# > ç»•è¿‡ä¼ä¸šè¯ä¹¦è¿‡æœŸ
host, ocsp.apple.com, reject
# > é˜»æ­¢æ‹¦æˆªæŸç™¾æ”¶é›†ä¿¡æ¯
host, ntb.lanjie100.com, reject
# > Safari é˜²è·³è½¬
host, app-site-association.cdn-apple.com, reject
geoip,cn, direct
final, é»‘ç™½åå•

[rewrite_local]
# > Tiktokè§£é”
(?<=_region=)CN(?=&) url 307 KR
(?<=&mcc_mnc=)4 url 307 2
^(https?:\/\/(tnc|dm)[\w-]+\.\w+\.com\/.+)(\?)(.+) url 302  $1$3
(?<=\d\/\?\w{7}_\w{4}=)1[6-9]..(?=.?.?&) url 307 17
# > çˆ±å¥‡è‰ºå»å¹¿å‘Š
(^https?:\/\/m\.iqiyi\.com\/v_.*) url 307 https://z1.m1907.cn/?jx=$1
# > ä¼˜é…·è§†é¢‘å»å¹¿å‘Š
(^https?:\/\/m\.youku\.com\/.*) url 307 https://z1.m1907.cn/?jx=$1
# > è…¾è®¯è§†é¢‘å»å¹¿å‘Š
(^https?:\/\/m\.v\.qq\.com\/x\/(m\/)?play.*) url 307 https://z1.m1907.cn/?jx=$1

[task_local]
# > æµåª’ä½“è§£é”æŸ¥è¯¢
event-interaction https://ghproxy.com/https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/streaming-ui-check.js, tag=æµåª’ä½“è§£é”æŸ¥è¯¢, img-url=arrowtriangle.right.square.system, enabled=true
# > Googleæ£€æµ‹
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/switch-check-google.js, tag=Google é€ä¸­æ£€æµ‹, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Google.png, enabled=true
# > NetflixæŸ¥è¯¢
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/nf-ui-check.js, tag=Netflix æŸ¥è¯¢, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Netflix_Letter.png, enabled=true
# > Netflixåˆ‡æ¢
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/switch-check-nf.js, tag=Netflix åˆ‡æ¢, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Netflix_Letter.png, enabled=true
# > Disney+æŸ¥è¯¢
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/disney-ui-check.js, tag=Disneyá© æŸ¥è¯¢, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Disney.png, enabled=true
# > Disney+åˆ‡æ¢
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/switch-check-disneyplus.js, tag=Disneyá© åˆ‡æ¢, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Disney.png, enabled=true
# > YouTubeæŸ¥è¯¢
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/ytb-ui-check.js, tag=YouTube æŸ¥è¯¢, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/YouTube_Letter.png, enabled=true
# > YouTubeåˆ‡æ¢
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/switch-check-ytb.js, tag=YouTube åˆ‡æ¢, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/YouTube_Letter.png, enabled=true

[mitm]
skip_validating_cert = true
force_sni_domain_name = false
hostname = -*www.google.com, *.tiktokv.com, *.byteoversea.com, *.tik-tokapi.com, -*snssdk.com, -*amemv.com